# Schema Information

## teams
column name     | data type | details
----------------|-----------|-----------------------
id              | integer   | not null, primary key, indexed
team_name       | string    | not null, unique, indexed
description     | string    |
avatar          | attachment| (need to supply a default image)
private         | boolean   | not null, (default to true)


## users
column name     | data type | details
----------------|-----------|-----------------------
id              | integer   | not null, primary key, indexed
first_name      | string    | not null
last_name       | string    | not null
password_digest | string    | not null
session_token   | string    | not null, indexed, unique
email           | string    | not null, indexed, unique
avatar          | attachment    |


## users_teams (JOIN TABLE)
column name     | data type | details
----------------|-----------|-----------------------
id              | integer   | not null, primary key
user_id         | integer   | not null
team_id         | integer   | not null
user_permission_type_id    | integer   | not null, (NOT INCLUDING PERMISSION IN V1)
active          | boolean    | default to true

** Index unique on user_id and team_id

<!-- ## user_permission_types NOT INCLUDING IN V1
column name     | data type | detailsM
----------------|-----------|-----------------------
id              | integer   | not null, primary key
type            | string    | not null -->


<!-- ## sessions
column name     | data type | details
----------------|-----------|-----------------------
id              | integer   | not null, primary key
user_id         | integer   | not null, foreign_key
session_token   | string    | not null, indexed, unique -->


## projects
column name     | data type | details
----------------|-----------|-----------------------
id              | integer   | not null, primary key
team_id         | integer   | not null, foreign_key (teams)
title           | string    | not null
key             | string    | not null (Autogenerated)
description     | text      |
avatar          | attachment    | (need to supply default)
active          | boolean   | not null, (default to true)

** Index unique on team_id and key

## sprints
column name     | data type | details
----------------|-----------|-----------------------
id              | integer   | not null, primary key
project_id      | integer   | not null, foreign_key (projects)
sprint_name     | string    | not null
duration        | integer   | not null
user_id         | integer   | not null, foreign_key (users)


## project_sprint
column name     | data type | details
----------------|-----------|-----------------------
id              | integer   | not null, primary key
project_id      | string    | not null
sprint_id       | string    |
active          | boolean   | not null, (default to true)



## status_types
column name     | data type | details
----------------|-----------|-----------------------
id              | integer   | not null, primary key
type            | string    | not null


## issue_types
column name     | data type | details
----------------|-----------|-----------------------
id              | integer   | not null, primary key
type            | string    | not null
avatar          | attachment    |


## issues
column name     | data type | details
----------------|-----------|-----------------------
id              | integer   | not null, primary key
project_id      | integer   | not null, foreign_key
summary         | string    | not null
description     | text      |
active          | boolean   | not null, (Default to true)
sprint          | boolean   | not null, (Default to false)
issue_type_id   | integer   | not null, foreign_key (issue_types)
status_type_id  | integer   | not null, foreign_key (status_types) (Default to Todo)
priority        | integer   | (Scale 1 - 5)(Default to 3)
resolution      | string    | not null, (Default to unresolved), Autogenerated

## issues_audit
column name     | data type | details
----------------|-----------|-----------------------
id              | integer   | not null, primary key
issue_id        | integer   | not null, foreign_key (issues)
initial         | boolean    | not null
summary         | string    |
description     | string    |
issue_type_id   | integer   | foreign_key (issue_types)
status_type_id  | string    |
priority        | integer   |
resolution      | string    | Autogenerated
attachment_id   |
user_id         | integer   | not null, foreign_key(users)


## issues_attachments (JOIN TABLE)
column name     | data type | details
----------------|-----------|-----------------------
id              | integer   | not null, primary key
issue_id        | integer   | not null, foreign_key (issues)
attachment      | attachment    | not null
active          | boolean   | not null, (Default to true)


## issues_users (JOIN TABLES)
column name     | data type | details
----------------|-----------|-----------------------
id              | integer   | not null, primary key
issue_id        | integer   | not null, foreign_key
user_id         | string    | not null, foreign_key
owner           | boolean   | not null

## comments
column name     | data type | details
----------------|-----------|-----------------------
id              | integer   | not null, primary key
issue_id        | integer   | not null, foreign_key (issues)
user_id         | string    | not null, foreign_key (users)
body            | string    | not null

## votes
column name     | data type | details
----------------|-----------|-----------------------
id              | integer   | not null, primary key
issue_id        | integer   | not null, foreign_key (issues)
user_id         | string    | not null, foreign_key (users)
total_count     | integer   | not null

## watchers
column name     | data type | details
----------------|-----------|-----------------------
id              | integer   | not null, primary key
issue_id        | integer   | not null, foreign_key (issues)
user_id         | string    | not null, foreign_key (users)
total_count     | integer   | not null
